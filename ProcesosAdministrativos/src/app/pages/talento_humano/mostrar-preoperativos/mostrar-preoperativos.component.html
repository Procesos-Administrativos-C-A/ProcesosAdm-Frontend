<div class="flex flex-col min-h-screen">
  <nav
    class="relative w-screen flex h-16 items-center justify-stretch bg-Primario text-white shadow-lg shadow-Primario">
    <div class="flex items-center sm:justify-start telefono:justify-between  sm:w-1/2 telefono:w-4/6">
      <div class="sm:hidden telefono:block">
        <a>A</a>
      </div>
      <div class="w-28 flex-shrink-0 sm:block telefono:relative telefono:-right-0">
        <img src="../../../assets/logo_cable_aereo_color_dos.png" alt="Logo" class="bg-contain h-[4rem] object-cover">
      </div>

      <div class="nav-links sm:block telefono:hidden ">
        <ul class="flex items-center ">
          <li class=" mx-10"><a href="#">Inicio</a></li>
          <li class=" mx-10">
            <button type="button" class="bg-transparent  rounded-md h-12 w-32 focus:shadow-lg focus:shadow-white/10"
              (click)="dropDownPre()">Preoperativos</button>
            <div
              class="animate-fade-right absolute  mt-2 w-56 z-10   rounded-md bg-white shadow-lg shadow-gray-400  focus:outline-none"
              (mouseleave)="dropDownPre()" *ngIf="dropdown_preoperativos()">
              <div class="" role="none">
                <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                <a href="/Reportes" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" role="menuitem" tabindex="-1" >Lista de Preoperativos</a>
                <a href="/Reportes/Consolidado" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" role="menuitem" tabindex="-1" >Reporte por mes</a>
                <a href="/Reportes/Asistencia" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" role="menuitem" tabindex="-1" >Reporte por empleado</a>
              </div>
            </div>
          </li>
          <li class="mx-10">
            <button type="button" class="bg-transparent  rounded-md" (click)="dropDownTram()">Tramites</button>
            <div
              class="animate-fade-right absolute  mt-2 w-56 z-10  rounded-md bg-white shadow-lg shadow-gray-400 focus:outline-none transition-all duration-500"
              (mouseleave)="dropDownTram()" *ngIf="dropdown_tramites()">
              <div class="">
                <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Solicitar
                  vacaciones</a>
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Generar
                  certificado</a>
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Retiro
                  de cesantias</a>
              </div>
            </div>
          </li>
          <li class="mx-10">
            <button type="button" class="bg-transparent  rounded-md" (click)="dropDownSoli()">Solicitudes</button>
            <div
              class="animate-fade-right absolute  mt-2 w-56 z-10  rounded-md bg-white shadow-lg shadow-gray-400 focus:outline-none transition-all duration-500"
              (mouseleave)="dropDownSoli()" *ngIf="dropdown_solicitudes()">
              <div class="">
                <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Solicitudes
                  de
                  vacaciones</a>
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Solicitudes
                  de
                  certificados</a>
                <a href="#"
                  class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white">Solicitudes
                  de
                  cesantias</a>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class=" flex justify-end sm:w-1/2 telefono:w-2/6">
      <div>
        <p></p>
        <!--<img src="../../../assets/user_icon.png" alt="Usuario" class="bg-contain h-[4rem]">  -->
      </div>
    </div>
  </nav>
  <main class="w-screen pb-14 relative min-h-[760px] mb-auto">
    <div class="preoperativo__fondo min-h-screen flex flex-col items-center justify-center">
      <input type="date" [(ngModel)]="fechaBusqueda" placeholder="Buscar por fecha"
        class="w-3/4 sm:w-1/2 md:w-1/3 lg:w-1/4 mb-4 ml-auto mr-auto sm:ml-4 md:ml-8 lg:ml-12" />

      <table class="w-3/4 bg-white shadow-md rounded">
        <thead>
          <tr class="bg-Primario text-white">
            <th class="py-3 px-6">Fecha</th>
            <th class="py-3 px-6">Encargado</th>
            <th class="py-3 px-6">Turno</th>
            <th class="py-3 px-6">Lugar</th>
            <th class="py-3 px-6">Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let preoperativo of filtrarPreoperativos()" class="hover:bg-gray-100">
            <td class="py-3 px-6">{{ preoperativo.fecha }}</td>
            <td class="py-3 px-6">{{ preoperativo.encargado }}</td>
            <td class="py-3 px-6">{{ preoperativo.turno }}</td>
            <td class="py-3 px-6">{{ preoperativo.lugar }}</td>
            <td class="py-3 px-6">
              <button class="bg-Primario text-white px-4 py-2 rounded" (click)="verDetalles(preoperativo)">Ver</button>
            </td>
          </tr>
        </tbody>
      </table>
      <button *ngIf="fechaBusqueda" class="bg-Primario descargar-pdf-button mt-4" (click)="generarPDF()">Descargar PDF</button>

      <!-- Modal -->
      <div *ngIf="modalVisible" class="preoperativos__modal">
        <div class="preoperativos__modal-content">
          <div class="preoperativos__modal-header">
            <h2 class="preoperativos__details-title">Detalles del Preoperativo</h2>
            <button class="preoperativos__close-button" (click)="modalVisible = false">×</button>
          </div>
          <div class="preoperativos__modal-body">
            <div class="preoperativos__details-info">
              <p><strong>Fecha:</strong> {{ preoperativoSeleccionado?.fecha }}</p>
              <p><strong>Encargado:</strong> {{ preoperativoSeleccionado?.encargado }}</p>
              <p><strong>Turno:</strong> {{ preoperativoSeleccionado?.turno }}</p>
              <p><strong>Lugar:</strong> {{ preoperativoSeleccionado?.lugar }}</p>
              <p><strong>Festivo:</strong>
                <span *ngIf="preoperativoSeleccionado?.festivo; else noFestivo">Verdadero</span>
                <ng-template #noFestivo>Falso</ng-template>
              </p>
            </div>
            <h3 class="preoperativos__details-subtitle">Empleados Preoperativos</h3>
            <table class="preoperativos__employees-table"
              *ngFor="let estacion of empleadosAgrupadosPorEstacion | keyvalue">
              <thead>
                <tr>
                  <th colspan="4">{{ estacion.key }}</th>
                </tr>
                <tr>
                  <th>Cédula</th>
                  <th>Horas diarias</th>
                  <th>Horas adicionales</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let empleado of estacion.value" class="preoperativos__employee-row">
                  <td>{{ empleado.cedula }}</td>
                  <td>{{ empleado.horas_diarias }}</td>
                  <td>{{ empleado.horas_adicionales }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>