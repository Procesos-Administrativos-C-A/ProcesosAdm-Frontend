<nav class="relative w-screen flex h-16 items-center justify-stretch bg-Primario text-white shadow-lg shadow-Primario" >
    <div class="flex items-center sm:justify-start telefono:justify-between  sm:w-1/2 telefono:w-4/6">
        <div class="sm:hidden telefono:block">
            <a>A</a>
        </div>
        <div class="w-28 flex-shrink-0 sm:block telefono:relative telefono:-right-0">
            <img src="../../../assets/logo_cable_aereo_color_dos.png" alt="Logo" class="bg-contain h-[4rem] object-cover">
        </div>
      
        <div class="nav-links sm:block telefono:hidden ">
        <ul class="flex items-center ">
            <li class=" mx-10"><a href="#">Inicio</a></li>
            <li class=" mx-10" >
                <button type="button" class="bg-transparent  rounded-md h-12 w-32 focus:shadow-lg focus:shadow-white/10" (click)="dropDownPre()">Preoperativos</button> 
                <div class="animate-fade-right absolute  mt-2 w-56 z-10   rounded-md bg-white shadow-lg shadow-gray-400  focus:outline-none" (mouseleave)="dropDownPre()" *ngIf="dropdown_preoperativos()" >
                    <div class="" role="none">
                      <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                      <a href="/Preoperativos/" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" role="menuitem" tabindex="-1" >Crear Preoperativo</a>
                      <a href="/Preoperativos/Editar" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" role="menuitem" tabindex="-1" >Editar ultimo registro</a>
                    </div>
                  </div>    
            </li>
            <li class="mx-10">
                <button type="button" class="bg-transparent  rounded-md" (click)="dropDownTram()">Tramites</button> 
                <div class="animate-fade-right absolute  mt-2 w-56 z-10  rounded-md bg-white shadow-lg shadow-gray-400 focus:outline-none transition-all duration-500"
                 (mouseleave)="dropDownTram()" *ngIf="dropdown_tramites()"  >
                    <div class="" >
                      <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" >Solicitar vacaciones</a>
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white"  >Generear certificaco</a>
                      <a href="#" class="text-gray-700 block px-4 py-2 text-sm rounded-md hover:bg-Secundario hover:shadow-md hover:shadow-gray-400/55 hover:text-white" >Retiro de cesantias</a>
                    </div>
                  </div>
            </li>
        </ul>
        </div>
    </div>
    <div class=" flex justify-end sm:w-1/2 telefono:w-2/6">     
        <div class="mr-8">
            <p>{{nombre}}</p>
            <!--<img src="../../../assets/user_icon.png" alt="Usuario" class="bg-contain h-[4rem]">  -->
        </div>
    </div>
    
    




</nav>


<main class=" w-screen pb-14 relative min-h-[760px] "> 
    <div class=" w-10/12 mx-auto my-14 rounded-md flex flex-col items-center justify-start border border-spacing-7 shadow-inner shadow-TextoGris/45 border-black bg-white ">
        <h1 class="text-center text-2xl font-semibold leading-7 text-gray-900 my-8">Nuevo Preoperativo</h1>
        <form action="" class="w-10/12 m-auto flex flex-wrap items-center " 
        [formGroup]="preoperativoForm" (ngSubmit)="guardarInformacion()" >
            <div class=" w-1/3">
                <label for="lugar" class="w-1/6 mx-9  text-sm font-medium leading-6 text-gray-900">Lugar :</label>
                <select name="lugar"  id="lugar" class="rounded-md" (change)="actualizarLinea($event)" 
                formControlName="lugar">
                    <option value="Linea1">Linea 1</option>
                    <option value="Linea2">Linea 2</option>
                    <option value="Mantenimiento">Mantenimiento</option>
                </select>

            </div >
            
            <div class="w-1/3">

                <label for="fecha" class="w-1/6 mx-9  text-sm font-medium leading-6 text-gray-900">Fecha :</label>
                <input  type="date" name="fecha"  id="fecha" value="{{fecha_hoy}}" class="disabled:appearance-none w-[45%] rounded-md "
                formControlName="fecha">

            </div>
            
            <div class="w-1/3">

                <label for="turno" class="w-1/6 mx-9  text-sm font-medium leading-6 text-gray-900">Turno :</label>
                <select name="turno"  id="turno" class="rounded-md"
                formControlName="turno">
                    <option value="MaÃ±ana">6 a.m - 2 p.m</option>
                    <option value="Tarde">2 a.m - 10 p.m</option>
                    <option value="Noche">10 a.m - 6 p.m</option>
                </select>

            </div>
            
            
            <div class="w-1/3 mt-9">

                <label for="festivo" class="w-1/6 ml-9  text-sm font-medium leading-6 text-gray-900">Dia festivo </label>
                <input type="checkbox" name="festivo" id="festivo" class="ml-2 border-2 text-xl border-gray-300 rounded-md  checked:bg-Primario" 
                formControlName="festivo" >

            </div>

            <div class="w-1/3 mt-9">
                
                <label for="extra" class="w-1/6 ml-9  text-sm font-medium leading-6 text-gray-900">Horas extra </label>
                <input type="checkbox"  name="extra" id="extra"  class="ml-2 border-2 text-xl border-gray-300 rounded-md  checked:bg-Primario" 
                formControlName="extra" >

            </div>
            <div class=" w-full mt-8" formArrayName="estaciones">
                <table  class="table-auto w-full mt-10 relative" 
                *ngFor="let estacion of estacionesesArray.controls; let i = index">
                    <div>

                    </div>
                    <tr>
                      <th colspan="3" class="bg-gray-200 py-4 text-center">{{estacion.value.nombre[0]}}
                        <button type="button" class="bg-Primario text-white rounded-full w-8 h-8 flex items-center justify-center absolute top-3 right-2" (click)="agregarEmpleado(estacion.value.nombre[0])">+</button>
                    </th>
                      
                    </tr>
                    <tr *ngFor="let empleado of empleadosArray(i).controls; let j = index">
                        <td *ngIf="preoperativoForm.get('extra')?.value" class="w-16 p-4 border">
                            <input name="hora_extra" type="number" min="0" max="9" inputmode="numeric" value="{{empleado.get('hora_extra')?.value}}" class="appearance-none w-14 rounded-md focus:outline-none focus:ring-0 focus:appearance-none" (change)="asignarHorasEmpleado(i,j,$event)">
                        </td>
                        <td class="w-5/12 p-4 border">
                            <select name="cargo" class="rounded-md" (change)="asignarCargoEmpleado(i,j,$event)">
                                <option value="Operador">Operador</option>
                                <option value="Auxiliar de T & A">Auxiliar de T & A</option>
                                <option value="Ingeniero MTTO">Ingeniero de MTTO</option>
                                <option value="Tecnico MTTO">Tecnico MTTO</option>
                            </select>
                        </td>
                        <td class="w-6/12 p-4 border relative">
                            <select name="empleado" class="rounded-md" (change)="asignarNombreEmpleado(empleado.get('cargo')?.value,i,j,$event)">
                                <option value="">{{empleado.get('nombre')?.value}}</option>
                                <option *ngFor="let empleado of empleados[empleado.get('cargo')?.value]" value="{{empleado.nombre}}"> {{empleado.nombre}} </option>
                            </select>
                            <button type="button" class="bg-Primario text-white rounded-full w-8 h-8 flex items-center justify-center absolute top-3 right-2" (click)="eliminarEmpleado(i,j)">-</button>
                        </td>
                    </tr>
                  </table>
                  



            </div>
            <div class="w-full">
                <button type="submit" [disabled]="!preoperativoForm.valid" class="disabled:bg-red-500 flex items-center justify-center p-3 w-1/4 mx-auto my-8 rounded-md bg-Primario text-TextoBlanco hover:bg-Secundario active:bg-gray-500 ">Guardar</button>
            </div>
            
        </form>
        

    </div>
    
</main>
